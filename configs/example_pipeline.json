{
  "pipeline_info": {
    "name": "示例检测流程",
    "description": "基于相机输入的目标检测和结果输出流程",
    "version": "1.0.0",
    "created_by": "FAHAI",
    "created_date": "2024-01-01",
    "last_modified": "2024-01-01"
  },
  "execution_settings": {
    "mode": "sequential",
    "max_workers": 4,
    "timeout": 30.0,
    "retry_count": 3,
    "retry_delay": 1.0,
    "enable_monitoring": true,
    "log_level": "INFO"
  },
  "modules": [
    {
      "id": "camera_001",
      "type": "camera",
      "name": "主相机",
      "position": {
        "x": 100,
        "y": 150
      },
      "config": {
        "camera_type": "usb",
        "camera_id": 0,
        "width": 1280,
        "height": 720,
        "fps": 30,
        "exposure": -1,
        "gain": -1,
        "auto_focus": true,
        "format": "BGR"
      },
      "enabled": true
    },
    {
      "id": "trigger_001",
      "type": "trigger",
      "name": "定时触发器",
      "position": {
        "x": 100,
        "y": 50
      },
      "config": {
        "mode": "timer",
        "interval": 2.0,
        "enabled": true,
        "max_triggers": -1,
        "delay": 0.0,
        "external_signal": {
          "type": "gpio",
          "port": "/dev/ttyUSB0",
          "baudrate": 9600,
          "signal_high": true
        },
        "modbus": {
          "host": "127.0.0.1",
          "port": 502,
          "unit_id": 1,
          "address": 0,
          "trigger_value": 1
        }
      },
      "enabled": true
    },
    {
      "id": "model_001",
      "type": "model",
      "name": "YOLOv5检测模型",
      "position": {
        "x": 350,
        "y": 150
      },
      "config": {
        "model_type": "detection",
        "model_path": "./models/yolov5s.onnx",
        "model_format": "onnx",
        "input_size": [640, 640],
        "confidence_threshold": 0.5,
        "nms_threshold": 0.4,
        "max_detections": 100,
        "class_names": [
          "person", "bicycle", "car", "motorcycle", "airplane", "bus", "train", "truck", "boat",
          "traffic light", "fire hydrant", "stop sign", "parking meter", "bench", "bird", "cat",
          "dog", "horse", "sheep", "cow", "elephant", "bear", "zebra", "giraffe", "backpack",
          "umbrella", "handbag", "tie", "suitcase", "frisbee", "skis", "snowboard", "sports ball",
          "kite", "baseball bat", "baseball glove", "skateboard", "surfboard", "tennis racket",
          "bottle", "wine glass", "cup", "fork", "knife", "spoon", "bowl", "banana", "apple",
          "sandwich", "orange", "broccoli", "carrot", "hot dog", "pizza", "donut", "cake",
          "chair", "couch", "potted plant", "bed", "dining table", "toilet", "tv", "laptop",
          "mouse", "remote", "keyboard", "cell phone", "microwave", "oven", "toaster", "sink",
          "refrigerator", "book", "clock", "vase", "scissors", "teddy bear", "hair drier", "toothbrush"
        ],
        "device": "auto",
        "batch_size": 1,
        "preprocessing": {
          "normalize": true,
          "mean": [0.485, 0.456, 0.406],
          "std": [0.229, 0.224, 0.225],
          "letterbox": true,
          "bgr2rgb": true
        },
        "postprocessing": {
          "filter_classes": [],
          "min_area": 100,
          "max_area": -1,
          "aspect_ratio_range": [0.1, 10.0]
        }
      },
      "enabled": true
    },
    {
      "id": "postprocess_001",
      "type": "postprocess",
      "name": "结果处理器",
      "position": {
        "x": 600,
        "y": 150
      },
      "config": {
        "output_format": "json",
        "save_results": true,
        "output_path": "./outputs",
        "filename_template": "{datetime}_{count}.{ext}",
        "enable_filter": true,
        "filter_rules": {
          "min_confidence": 0.6,
          "max_confidence": 1.0,
          "allowed_classes": ["person", "car", "truck"],
          "blocked_classes": [],
          "min_area": 500,
          "max_area": -1,
          "roi_filter": null
        },
        "data_enrichment": {
          "add_timestamp": true,
          "add_metadata": true,
          "add_statistics": false,
          "coordinate_conversion": null
        },
        "aggregation": {
          "enable": false,
          "window_size": 10,
          "method": "average"
        },
        "notification": {
          "enable": true,
          "conditions": [
            {
              "name": "person_detected",
              "condition": "count > 0 and 'person' in class_names",
              "message": "检测到人员"
            }
          ],
          "methods": ["log"]
        }
      },
      "enabled": true
    }
  ],
  "connections": [
    {
      "source_module": "trigger_001",
      "source_port": "trigger_signal",
      "target_module": "camera_001",
      "target_port": "trigger"
    },
    {
      "source_module": "camera_001",
      "source_port": "image",
      "target_module": "model_001",
      "target_port": "image"
    },
    {
      "source_module": "model_001",
      "source_port": "detections",
      "target_module": "postprocess_001",
      "target_port": "results"
    }
  ],
  "global_settings": {
    "logging": {
      "level": "INFO",
      "format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s",
      "log_file": "./logs/fahai.log",
      "max_file_size": "10MB",
      "backup_count": 5
    },
    "performance": {
      "enable_profiling": false,
      "profile_output": "./profiles",
      "memory_limit": "2GB"
    },
    "gui": {
      "theme": "default",
      "language": "zh_CN",
      "auto_save_interval": 300,
      "recent_files_count": 10
    },
    "hardware": {
      "gpu_acceleration": "auto",
      "thread_pool_size": 4,
      "memory_pool_size": "512MB"
    }
  },
  "roi_regions": [
    {
      "name": "检测区域1",
      "x": 100,
      "y": 100,
      "width": 400,
      "height": 300,
      "enabled": true,
      "modules": ["model_001"]
    }
  ],
  "schedule": {
    "enable_scheduling": false,
    "start_time": "08:00:00",
    "end_time": "18:00:00",
    "days_of_week": [1, 2, 3, 4, 5],
    "timezone": "Asia/Shanghai"
  },
  "alerts": [
    {
      "name": "高置信度检测",
      "condition": "confidence > 0.9",
      "action": "log_warning",
      "enabled": true
    },
    {
      "name": "检测数量异常",
      "condition": "detection_count > 10",
      "action": "send_notification",
      "enabled": true
    }
  ]
}